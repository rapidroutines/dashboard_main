/* src/index.css - Adding some core responsive utilities */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    html {
        -webkit-text-size-adjust: 100%; /* Prevent font scaling in landscape */
        text-size-adjust: 100%;
    }
    
    body {
        @apply [scrollbar-color:_#cbd5e1_transparent];
        -webkit-overflow-scrolling: touch; /* Smoother scrolling on iOS */
        @apply text-base antialiased;
    }

    /* Improve tap target sizes on mobile */
    @media (max-width: 640px) {
        button, 
        [role="button"],
        input,
        select,
        a {
            @apply min-h-[44px] min-w-[44px];
            touch-action: manipulation; /* Faster tap response */
        }
    }
}

@layer components {
    .sidebar-group {
        @apply flex w-full flex-col gap-y-2;
    }

    .sidebar-group-title {
        @apply overflow-hidden text-ellipsis text-sm font-medium text-slate-600;
    }

    .sidebar-item {
        @apply flex h-[40px] w-full flex-shrink-0 items-center gap-x-3 rounded-lg p-3 text-base font-medium text-slate-900 transition-colors hover:bg-[#1e628c]/10;
        &.active {
            @apply bg-[#1e628c] text-slate-50;
        }
        @apply sm:h-[44px] sm:p-4; /* Larger touch target on mobile */
    }

    .title {
        @apply text-xl font-semibold text-slate-900 sm:text-2xl md:text-3xl;
    }

    .btn-ghost {
        @apply flex h-9 sm:h-10 flex-shrink-0 items-center justify-center gap-x-2 rounded-lg p-2 text-slate-400 transition-colors hover:bg-[#1e628c]/10 hover:text-slate-500;
    }

    .link {
        @apply text-sm sm:text-base font-medium text-slate-900 transition-colors hover:underline;
    }

    .input {
        @apply hidden h-10 flex-shrink-0 items-center gap-x-2 rounded-lg border border-slate-300 px-2 text-base text-slate-900 transition-colors has-[input:focus]:border-[#1e628c] md:flex md:w-auto lg:w-80;
    }

    .card {
        @apply flex flex-col gap-y-3 sm:gap-y-4 rounded-lg border border-slate-300 bg-white p-3 sm:p-4 transition-colors;
    }

    .card-header {
        @apply flex items-center gap-x-2;
    }

    .card-title {
        @apply font-medium text-slate-900;
    }

    .card-body {
        @apply flex flex-col gap-y-2 rounded-lg p-3 sm:p-4;
    }

    .table {
        @apply h-full w-full text-slate-900;
    }

    .table-header {
        @apply sticky top-0 bg-slate-200;
    }

    .table-row {
        @apply border-b border-slate-300 transition-colors last:border-none;
    }

    .table-head {
        @apply h-12 px-4 text-start;
    }

    .table-cell {
        @apply w-fit whitespace-nowrap p-3 sm:p-4 font-medium;
    }
    
    /* Mobile-first responsive container */
    .container-responsive {
        @apply w-full px-3 sm:px-6 md:max-w-3xl md:mx-auto lg:max-w-5xl xl:max-w-7xl;
    }
    
    /* Responsive card grid */
    .card-grid {
        @apply grid grid-cols-1 gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 sm:gap-4;
    }
    
    /* Form elements */
    .form-input {
        @apply w-full rounded-lg border border-slate-300 px-3 py-2 text-slate-900 focus:border-[#1e628c] focus:outline-none focus:ring-1 focus:ring-[#1e628c];
        @apply h-10 sm:h-11; /* Taller on mobile for better touch */
    }
    
    /* Button styles */
    .btn {
        @apply rounded-lg px-3 py-2 font-medium transition-colors;
        @apply min-h-[40px] sm:min-h-[44px]; /* Better touch targets */
    }
    
    .btn-primary {
        @apply bg-[#1e628c] text-white hover:bg-[#174e70];
    }
    
    .btn-secondary {
        @apply border border-slate-300 bg-white text-slate-700 hover:bg-slate-50;
    }
}

/* Recharts customization */
.recharts-default-tooltip {
    @apply !rounded-lg !border !border-slate-300 !bg-white !px-2 !py-1 !shadow-lg;
}

.recharts-tooltip-label {
    @apply text-sm font-medium text-slate-900;
}

.recharts-tooltip-item {
    @apply text-sm font-medium !text-[#1e628c];
}

/* Safe areas for notched devices */
.safe-area-inset-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0);
}

.safe-area-inset-top {
    padding-top: env(safe-area-inset-top, 0);
}

/* Responsive text utilities */
.text-truncate {
    @apply overflow-hidden text-ellipsis whitespace-nowrap;
}

.text-truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* Fix for iOS 100vh issues */
.min-h-screen {
    min-height: 100vh;
    min-height: -webkit-fill-available;
    min-height: -moz-available;
    min-height: fill-available;
}

.h-screen {
    height: 100vh;
    height: -webkit-fill-available;
    height: -moz-available;
    height: fill-available;
}
